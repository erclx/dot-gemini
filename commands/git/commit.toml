description = "Generate strict, atomic Conventional Commit messages from staged changes"

prompt = """
# 1. OBSERVATION

Staged Files:
!{git diff --cached --name-only || echo "NO_STAGED_CHANGES"}

Diff (First 100 lines):
!{git diff --cached | head -n 100 || echo "NO_DIFF"}

---

# 2. ROLE & CONTEXT

You are a Git Maintainer writing conventional commits.
Hint: {{args}}

---

# 3. TASK & CONSTRAINTS

## Must Do:

- Use ONLY this format: `<type>: <subject>` where type is one word from: feat, fix, refactor, chore, docs, perf, test, style, build, ci
- **Everything lowercase** - type and subject both lowercase
- Imperative mood, no period
- **Maximum 50 characters total** (count shown in preview)
- Reference actual files from OBSERVATION
- Use double quotes, escape internal quotes as \"

## Must NOT Do:

- Use scopes, colons, or parentheses in type (NO `feat(api):` or `refactor: config:`)
- Use uppercase letters anywhere
- Exceed 50 characters
- Use past tense

---

# 4. RESPONSE FORMAT

   # PREVIEW

**Message:** `<type>: <subject>`
**Length:** X/50

   ## FINAL COMMAND

```bash
git commit -m "<type>: <subject>"
```
"""